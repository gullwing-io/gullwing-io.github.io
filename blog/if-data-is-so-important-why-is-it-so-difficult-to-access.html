<!DOCTYPE html>
<html lang="en">
      <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title> id&#x3D;&quot;ifdataissoimportantwhyisitsodifficulttoaccesshowibuiltadatawarehousewithoutanyexperience&quot;&gt;If data is so important why is it so difficult to access? How I built a data warehouse without any experience</title>
<link rel="stylesheet" href="styles.css">
<link rel="icon" type = "image/png" href="../img/gullwing-icon.png" />

<script
  async
  src="https://www.googletagmanager.com/gtag/js?id=G-BGXW90V3SE">
</script>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());
  gtag("config", "G-BGXW90V3SE");
</script>

</head>

<body>

  <script>
    // When the user scrolls the page, execute myFunction 
    window.onscroll = function() {myFunction()};

    function myFunction() {
      var winScroll = document.body.scrollTop || document.documentElement.scrollTop;
      var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      var scrolled = (winScroll / height) * 100;
      document.getElementById("myBar").style.width = scrolled + "%";
    }
  </script>

<div class="page-banner">
  <nav>
    <a href="https://www.gullwing.io/">
      <img id="header-image" src="../img/gullwing-logo.png" alt ="Gullwing Logo">
    </a>  
  </nav>

  <div class="header">
    <div class="progress-container">
      <div class="progress-bar" id="myBar"></div>
    </div>  
  </div>
</div>



  <div class="mainBody">
    <h1 id="ifdataissoimportantwhyisitsodifficulttoaccesshowibuiltadatawarehousewithoutanyexperience">If data is so important why is it so difficult to access? How I built a data warehouse without any experience</h1>
<p>We are constantly told how important data is and how our companies make data driven decisions but in reality, this couldn’t be further from the truth.</p>
<p>Innovation is about moving quickly, asking questions and proving hypotheses. <strong>E</strong>ngineering, <strong>P</strong>roduct and <strong>B</strong>usiness &amp; <strong>M</strong>arketing (referred to as <strong>EPBM</strong> from now on) all need access to data and insights to do this but it’s not always available. If a company’s data is not democratised answering these questions has to be outsourced to… <em>the</em> <em>datakeepers</em>.</p>
<h1 id="thedatakeepers">The datakeepers</h1>
<p>I posed a hypothetical question to friends and ex-colleagues who also work in <strong>EPBM</strong>:</p>
<h3 id="engineering">Engineering</h3>
<blockquote>
  <p>“If you wanted to know which features on your website lead to the least conversion and had the least engagement, so you could remove them and measure the performance impact, what would you do?”</p>
</blockquote>
<h3 id="product"><strong>Product</strong></h3>
<blockquote>
  <p><em>“If you wanted to know the number of female shoppers from the UK on your website who had five or more items in their basket but who had not logged-in in the last month, what would you do?”</em></p>
</blockquote>
<h3 id="businessmarketing">Business &amp; Marketing</h3>
<blockquote>
  <p><em>“If you wanted to know the cost for getting new users acquired from TikTok who add an item to their cart but never checkout, what would you do?”</em></p>
</blockquote>
<p>All the answers followed a similar pattern:</p>
<ul>
<li><em>“I would get some of the information from different places then try to piece it together”</em></li>
<li><em>“I’m not sure if this data is tracked, I would need to ask the tech team”</em></li>
<li><em>“I would ask someone in the data insights team to produce a report for me”</em></li>
</ul>
<p>If teams can’t understand their domain and answer questions themselves they will need to go to someone who can, <em>the datakeepers</em>. This introduces two problems:</p>
<ol>
<li>The team who needs the insights becomes blocked so they either can’t proceed or they proceed without knowing if they are doing the right thing.</li>
<li>These ad hoc requests either block the data and insights team from their own priorities and backlog, or they block the requester from being able to proceed.</li>
</ol>
<p>Both of these outcomes are detrimental to the company and can lead to poor relationships between <strong>EPBM</strong> and the data and insight teams.</p>
<p>After spending most of my career dependent on <em>the datakeepers</em>, things took a turn when I started a new role. I was previously an engineer in a company that had roughly 1400 people in the technology department alone, a department where there was a different domain for every discipline you can imagine. In 2021 I moved to be the VP of Engineering at a start-up with 7 full-time employees in technology.</p>
<p>Joining a start-up tech team was a world apart from my previous experience. As well as building the consumer facing product, the tech team also needed to provide business critical data and I needed to decide what took priority.</p>
<p><img src="https://miro.medium.com/max/1168/0*XxlDl6JslfMdgVVW.jpg" alt="" /></p>
<h2 id="understandingtheproblem">Understanding the problem</h2>
<p>I was now on the other-side of <em>the datakeepers</em> problem, <strong>EPBM</strong> needed access to data and we were suffering from the exact lack of democratisation I previously mentioned.</p>
<p>While the product team were experienced when it came to analytics there was data distributed across multiple systems and only some of it accessible without tech. However more problematic was that all business critical reports were generated from the production database.</p>
<p>These reports were <code>csv</code> files generated by a bespoke backend service that could be run by anyone in the business at any time. This introduced a few issues:</p>
<ol>
<li>If a new report was needed it might take an engineer a week of development time to add them.</li>
<li>If the business user wanted new data added to an existing report this would again require development time.</li>
<li>These reports would generate a lot of load on the production database, they could be triggered at any point by a business user. This could potentially put the platform’s availability at risk.</li>
<li>As the company got more data the reports took longer to generate and the service could run out of memory. This required more monitoring, alerting and DevOps support to ensure the reports were always available.</li>
</ol>
<p>These issues meant from a company perspective we were not using our data effectively and from a technology perspective we didn’t necessarily have the people to support both customer and business feature requests.</p>
<p>I now knew what success looked like:</p>
<ul>
<li>Anyone in the company could access all of our data and get insights without help from the technology team.</li>
<li>Decommission complex and expensive infrastructure.</li>
<li>The technology team would no longer be context switching from their roadmap to answer data and insight related questions.</li>
<li>The technology team doesn’t inherit a new system to manage and monitor.</li>
</ul>
<h3 id="breakingaparttheproblem">Breaking apart the problem</h3>
<p>While the report generation was specific to the company, the main issue I could see was the lack of decentralisation. I wanted to understand how I could solve that problem and hope this would unlock the <strong>EPBM</strong> teams.</p>
<p>I had zero experience with big data before I started this project, I had only experienced the problem of someone who wanted data insights. So I approached the problem in the same manner rather than an engineer trying to build a data warehouse. I knew what I wanted at the end, I had to try and break it down into the composite parts so I could build it.</p>
<p><img src="https://miro.medium.com/max/1400/1*9cnJct29gBC0u6NVKPoPYg.png" alt="" /><sub>
A high level diagram to understand what a data warehouse might look like
</sub></p>
<h3 id="datasources">Data sources</h3>
<p>Companies have data stored all over the place:</p>
<ul>
<li>In-house databases</li>
<li>Analytics tools</li>
<li>CRM systems</li>
<li>Marketing tools</li>
<li>… The list goes on and on</li>
</ul>
<p>All of these tools and data sources need to be understood as you will need to get access to them.</p>
<h3 id="datacollection">Data collection</h3>
<p>Once you know all the sources you have to get data from, you actually then to need to get it. This might require API access or there might be direct integrations but you are going to need to fetch this data, push it to your data storage while ensuring you are not duplicating or missing any records.</p>
<h3 id="datastorage">Data storage</h3>
<p>You’re going to need a database that’s designed for big data, create a structure and schema to hold all of your company information in one place and then manage it.</p>
<h3 id="dataprocessing">Data processing</h3>
<p>You might have already done some normalising of your data before you stored it but you’re also going to need to ensure it’s in a format that can be used by other tools but also find ways to link data across data sources that might have previously not been linked.</p>
<h3 id="datainsights">Data insights</h3>
<p>This is going to be the interface for your data and how your company will access it, this might be via visualisation tools, APIs or reports.</p>
<h2 id="designingasolution">Designing a solution</h2>
<p>There was no business buy-in, budget or people available to work on this project, if I was going to solve <em>the datakeepers</em> problem I would need to do it for next to nothing and in my spare time. I knew if it was possible it would be a success but I first needed to build a very feature rich proof of concept.</p>
<p>The company was already part of the <a href="https://aws.amazon.com/activate/">AWS</a> start-up program and used the credits <em>but</em> <a href="https://cloud.google.com/startup">GCP</a> offers a similar program. I didn’t have the knowledge or the time to build a data warehouse with open source software but maybe I could use these credits, <a href="https://cloud.google.com/">GCP tools</a> and <a href="https://cloud.google.com/find-a-partner/">partners</a> to show the business it was worth investing in.</p>
<h3 id="datasources-1">Data sources</h3>
<p>From my investigation I could find 14 different data sources and this was at a start-up, a larger companies are likely to have data in even more places. To give you some ideas and maybe help your search, I would look to integrate:</p>
<ul>
<li>Facebook Ads</li>
<li>Snapchat Ads</li>
<li>Stripe</li>
<li>Two internal Postgres AWS RDS databases</li>
<li>Amplitude (analytics)</li>
<li>Shopify</li>
<li>Apple Search Ads</li>
<li>AWS S3</li>
<li>Google Play</li>
<li>Apple App Store</li>
<li>Tiktok Ads</li>
<li>Google Analytics</li>
</ul>
<h3 id="datacollection-1">Data collection</h3>
<p>The data store didn’t need to be updated in real time, it could be updated once or twice a day and still provide great insight for the company. My initial idea was to write a simple <a href="https://nodejs.org/en/">NodeJS</a> application to run inside <a href="https://cloud.google.com/containers">GCP</a> which could call the data sources and push to our new data store. This initially sounded straight forward but some complexities arose:</p>
<ul>
<li>The application and each data source would need its own API connector that would need to be managed and monitored.</li>
<li>Ensuring there were no duplicates or missed data.</li>
</ul>
<p>This quickly put an end to the idea of writing a data collection application. I decided to look if there was a SaaS product that could offer this functionality but also tick the “costing nothing” box.</p>
<blockquote>
  <p><em>Effortlessly centralize all the data you need so your team can deliver better insights, faster. Start for free.</em><br />
  -<em><a href="https://www.fivetran.com/">FiveTran</a></em></p>
</blockquote>
<p><a href="https://www.fivetran.com/">FiveTran</a> is a SaaS product offering all of the connects we needed; push to multiple data stores, configurable sync times, delta updates, a whole load of other options and best of all it is an official partner so I could include it in our start-up credits.</p>
<h3 id="datastorage-1">Data storage</h3>
<p>Now I could collect the data I needed somewhere to store it, <a href="https://cloud.google.com/">GCP</a> offers lots of different proprietary <a href="https://cloud.google.com/products/databases">databases</a> and I took inspiration from <a href="https://web.dev/chrome-ux-report-bigquery/">The CrUX report</a>.</p>
<blockquote>
  <p><em>The Chrome User Experience Report provides user experience metrics for how real-world Chrome users experience popular destinations on the web.</em></p>
</blockquote>
<p><a href="https://web.dev/chrome-ux-report-bigquery/">The CrUX report</a> uses <a href="https://cloud.google.com/bigquery">BigQuery</a> to store huge amounts of data from Chrome users performance and UX metrics. It lets developers use SQL to write complex queries, while being very performant and you can also plug multiple tools on-top of <a href="https://cloud.google.com/bigquery">BigQuery</a> for visualisation and reports.</p>
<p>This made it an obvious choice for our data storage.</p>
<h3 id="dataprocessingdatainsights">Data processing &amp; data insights</h3>
<p>The final piece of the puzzle was how we were going to process the data and empower the company to access it themselves without knowing SQL.</p>
<p>While having no real experience with big data or insights I had read a lot about <a href="https://looker.com/">Looker</a> and it seemed really exciting. I don’t believe in silver bullets but this looked as close as it gets. It could handle all the data processing, insights, I could set it up alone and again it was covered by the <a href="https://cloud.google.com/startup">GCP start up credits</a>.</p>
<h3 id="datawarehousearchitecture">Data warehouse architecture</h3>
<p>I now had a rough idea of all the components and how I would go about putting them all together.</p>
<p><img src="https://miro.medium.com/max/1400/1*XrG1a6YUxJ7uAEe6zVLA_A.png" alt="" /><sub>The final design for the data warehouse
</sub></p>
<h3 id="buildingthesolution">Building the solution</h3>
<p>As soon as all the contracts were signed with <a href="https://cloud.google.com/startup">GCP</a> I could start with the confidence that all of the costs would be covered by our credits.</p>
<h3 id="fivetran">FiveTran</h3>
<p>The first thing I needed to set up was the BigQuery database but to make things even easier FiveTran allows you to do this from their onboarding.</p>
<p><img src="https://miro.medium.com/max/1400/1*Ap2wS8RXnNJTDNX9X-Sd0w.png" alt="" />
<sub>Select an existing destination or create a BigQuery instance
</sub>
<img src="https://miro.medium.com/max/1400/1*cVTjb-n4sg9VERwzttRhYg.png" alt="" /><sub>Configure your database
</sub>
This will however create the database in your FiveTran account but you can easily transfer the billing into your GCP account. Once BigQuery was set up I could start adding my connectors.</p>
<p><img src="https://miro.medium.com/max/1400/1*9bnjehBBJwerOuD7MHqrXQ.png" alt="" /><sub>FiveTran has loads of connectors to all different data sources
</sub>
<img src="https://miro.medium.com/max/1400/1*mUqRrQe4o04J1YxmMCGjXg.png" alt="" /><sub>Setting up the connector
</sub>
Setting up connectors are all relatively similar, you need to perform some authentication, name the schema for the destination database and some configuration. The instructions (on the right) are the best I’ve ever seen for this type of onboarding - all up to date and easy to follow. For 90% of the connectors you don’t need any technical knowledge.</p>
<p>Once a connector is set up, you can check its status, logs, schema, usage and configure things like sync frequency.</p>
<p><img src="https://miro.medium.com/max/1400/1*hRoEFifdVDkUtju3Z50Z6w.png" alt="" /><sub>Facebook Ads connector overview</sub></p>
<p>I then followed this process for all of our data sources. This process only takes a couple of hours and then all of the company data was being pushed to BigQuery.</p>
<p><img src="https://miro.medium.com/max/1400/1*KwZ8CqwBqFNId_tDtmU9Pw.png" alt="" />
<sub>Setting up all the data source connectors</sub></p>
<h3 id="bigquery">BigQuery</h3>
<p>If you created the BigQuery instance using the FiveTran setup, there is not much for you to do here. You will find your connectors have already created tables, schemas and started to populate your database.</p>
<p><img src="https://miro.medium.com/max/1400/1*3J_dgrBtpH0SNJvzhzQpYQ.png" alt="" />
<sub>Facebook Ads schema inside BigQuery</sub></p>
<p>From here you can check the schemas, preview data and run queries using SQL. You can also export queries directly to <a href="https://datastudio.google.com/">Google Data Studio</a> to generate data visualisations or reports.</p>
<p>For a basic setup you will never really even need to look at BigQuery again. As your Looker requirements become more advanced you might need to use <a href="https://docs.looker.com/data-modeling/learning-lookml/derived-tables"><strong>P</strong>ersistent <strong>D</strong>erived <strong>T</strong>able<strong>s</strong></a>, if this happens you will need to <a href="https://docs.looker.com/setup-and-management/database-config/google-bigquery#creating_a_temporary_dataset_for_persistent_derived_tables">create temporary datasets within BigQuery</a>.</p>
<h2 id="looker">Looker</h2>
<p><a href="https://docs.looker.com/">Looker</a> is used as both the data processing layer and the interface for the company to access the data. First thing you have to do is <a href="https://docs.looker.com/setup-and-management/database-config/google-bigquery">set up the database connection to BigQuery</a>.</p>
<p><img src="https://miro.medium.com/max/1400/1*XiewN-1oM00KvZ36Ud0xQA.png" alt="" /><sub>Setting up your BigQuery database connection</sub></p>
<p>You are now ready to <a href="https://docs.looker.com/data-modeling/getting-started/create-projects">start a new Looker project</a>.</p>
<p><img src="https://miro.medium.com/max/1400/1*4higDObRrWnF7gZX0Q5y3w.png" alt="" />
<sub>Setting up a new Looker project</sub></p>
<p><strong>LookML</strong>
LookML is Lookers Modelling Language and is how you will process, map and link your data. This will enable the company to query the data without any SQL knowledge.</p>
<p>Let’s take an extremely basic example, we have three tables in BigQuery:</p>
<p><img src="https://miro.medium.com/max/1400/1*OwkouctYXR1ufxAQCqtzNQ.png" alt="" />
<sub>Very simple tables for an e-commerce platform</sub></p>
<p>Within the develop section and the new project we are going to make a simple view for the orders table.</p>
<p><img src="https://miro.medium.com/max/1148/1*qpPcGRPRZ_ls1_VzIxWgxg.png" alt="" />
<sub>Creating a view</sub></p>
<p>First we will create the <a href="https://docs.looker.com/reference/field-params/dimension">dimensions</a>, which are just the attributes within the table.</p>
<pre><code>view: orders {  
  sql_table_name: `fivetran-my_new_warehouse.my-database-table.orders`  
    ;;

dimension: id {  
    primary_key: yes  
    type: number  
    sql: ${TABLE}.id ;;  
  }

dimension: user_id {  
    type: number  
    sql: ${TABLE}.user_id ;;  
  }

dimension: total_price {  
    type: number  
    sql: ${TABLE}.total_price ;;  
  }

dimension_group: created_at {  
    type: time  
    timeframes: [  
      raw,  
      time,  
      date,  
      week,  
      month,  
      quarter,  
      year  
    ]  
    sql: CAST(${TABLE}.created_at as TIMESTAMP) ;;  
  }}
</code></pre>
<p>Basic references in Looker are done by filename - see in the view attribute how we point to our BigQuery instance - the table name, then the filename of new view we created. Above also shows a few simple <a href="https://docs.looker.com/reference/field-params/dimension">dimensions</a> where you give it a name, select a type and the table field.</p>
<p>Looker also can make this easier for us by using “Create view from Table”.</p>
<p><img src="https://miro.medium.com/max/1166/1*YnTgb_u2N2LheOSpPhwD2g.png" alt="" />
<sub>Create a view from a table in BigQuery</sub></p>
<p>This will automatically scaffold a view from the database schema like the code snippet above but it will also add something called a <a href="https://docs.looker.com/reference/field-params/measure">measure</a>.</p>
<pre><code>measure: count {  
    type: count      
    label: "Count"  
  }
</code></pre>
<p>A <a href="https://docs.looker.com/reference/field-params/measure">measure</a> is an aggregation of a dimension. The example above is a count, this could be used to show how many orders are in the orders table. You can also write your own measures:</p>
<pre><code>measure: total_revenue {  
    type: sum  
    sql: ${total_price} ;;  
    value_format_name: gbp  
    label: "Total order revenue"  
  }measure: average_order_revenue {  
    type: average  
    sql: ${total_price} ;;  
    value_format_name: gbp  
    label: "Average order value"  
  }
</code></pre>
<p>These will allow our business users to find total revenue or average order values in GBP from the <a href="https://docs.looker.com/reference/field-params/dimension">dimension</a> <code>total_price</code>. This seems pretty basic but once we start linking other data and adding filters this becomes really powerful, for example using the <code>created_at</code> dimension we can answer the question:</p>
<ul>
<li>“Show me the total revenue and average order value per day for the last month”</li>
</ul>
<p>Next we create views for the users and countries tables using Lookers “Create view from table” and then we can move onto <a href="https://docs.looker.com/data-modeling/getting-started/connect-to-db-and-generate-model#when_you_need_to_configure_models">models</a>. You create a model in the same way you create a view but this time there are no shortcuts.</p>
<pre><code>connection: "looker-bigquery"include: "/views/*.view"explore: users {  
  label: "Users"  
}explore: orders {  
  label: "Orders"  
}explore: countries {  
  label: "Countries"  
}
</code></pre>
<p>First we use our database connection, then we are importing in all the views within the views directory. This exposes all of the views with a model to <a href="https://docs.looker.com/exploring-data/exploring-data">Lookers Explore interface</a> which is great but what if the business wants to know:</p>
<ul>
<li>“Which user has the highest Average Order Value”</li>
<li>“Which registered user country has generated the most revenue”</li>
</ul>
<p>We have three tables but none of them are related to each other, lets extend the orders explore:</p>
<pre><code>explore: orders {  
  label: "Orders" join: users {  
    relationship: one_to_many  
    sql_on: ${users.id}=${orders.user_id} ;;  
  } join: countries {  
    relationship: one_to_one  
    sql_on: ${countries.id}=${users.country_code} ;;  
  }}
</code></pre>
<p>The <code>orders</code> explore now has joins on both the <code>users</code> and <code>countries</code> views. Something you will need to ensure is the relationships on dimensions are using compatible types. I know in this instance they are all <code>numbers</code> so we have now successfully added relationships between three different tables.</p>
<p><img src="https://miro.medium.com/max/1400/1*-1IAwyOWDSxCGaGVtTjZnA.png" alt="" />
<sub>Relationships between tables for a simple e-commerce platform</sub></p>
<p>Once published to production our users will now be able to filter, sort and run different queries using these three tables without the need for any code, just the <a href="https://docs.looker.com/exploring-data/exploring-data">Looker Explore interface</a>.</p>
<p>This is of course a very simple example to explain some of the LookML concepts. I recommend taking this free training course for you can understand what is possible: <a href="https://www.cloudskillsboost.google/course_templates/327">https://www.cloudskillsboost.google/course_templates/327</a></p>
<p>I asked the business what they wanted to understand, this included:</p>
<ul>
<li>Number of orders.</li>
<li>Orders with vouchers.</li>
<li>Orders for returning customers vs new</li>
<li>Average minutes of livestreams watched</li>
<li>Livestream engagement and sales</li>
<li>Popular products</li>
<li>…many many more.</li>
</ul>
<p>I then created <a href="https://docs.looker.com/reference/field-params/dimension">dimensions</a>, <a href="https://docs.looker.com/reference/field-params/measure">measures</a> and <a href="https://docs.looker.com/data-modeling/getting-started/connect-to-db-and-generate-model#when_you_need_to_configure_models">models</a> to support all of these in the <a href="https://docs.looker.com/exploring-data/exploring-data">Looker Explore interface</a>.</p>
<p>**Looker analysing and visualising data<br />
**The complexity in Looker is setting up the LookML code, once this is in place I was able to give access to our business users. They can now use this data to perform insights using both the explorer and dashboard.</p>
<p>Going back to our example e-commerce database, suppose someone wants to know the number of orders per day over a certain date range. They select the dimension <code>Created at</code> and the measure <code>Count</code> then filter <code>Created at</code> over the required range.</p>
<p><img src="https://miro.medium.com/max/1400/1*06rZJgSUUPbx9DlGOoXz1g.png" alt="" />
<sub>Orders by day report</sub></p>
<p>We can now see a breakdown of the orders per day in the selected timeframe. Just by clicking a few UI elements we were able to generate this report while in the background Looker created the following SQL query.</p>
<pre><code>-- raw sql results do not include filled-in values for 'orders.created_at'

SELECT  
    (DATE(CAST(orders.created_at as TIMESTAMP) )) AS orders_created_at,  
    COUNT(*) AS orders_count  
FROM `fivetran-my_new_warehouse.my-database-table.orders`  
     AS orders  
WHERE ((( CAST(orders.created_at as TIMESTAMP)  ) &gt;= (TIMESTAMP('2022-06-07 00:00:00')) AND ( CAST(orders.created_at as TIMESTAMP)  ) &lt; (TIMESTAMP('2022-06-14 00:00:00'))))  
GROUP BY  
    1  
ORDER BY  
    1 DESC  
LIMIT 500
</code></pre>
<p>Your users might then want to see this visualised, this is as simple as just opening the visualisation accordion.</p>
<p><img src="https://miro.medium.com/max/1400/1*1CA0Rk-3oXoXO7VOixOFLg.png" alt="" />
<sub>Orders by day visualisation</sub></p>
<p>Next you might want to save this for a later date or add it to a dashboard.</p>
<p><img src="https://miro.medium.com/max/1400/1*l83IDyPMHJyQEJsG7O8ZnA.png" alt="" />
<sub>Saving explores</sub></p>
<p>You have three options; saving to an existing or new dashboard or also as a Look. A Look will store this report while a dashboard is purely the visualisation.</p>
<p><img src="https://miro.medium.com/max/1400/1*e3LqZU2O1ChI72aNWTC6AQ.png" alt="" />
<sub>Orders by day on a dashboard</sub></p>
<p>You can see the dashboard has created a date dropdown for us, users can then easily change the parameters of this filter to different presets or custom values.</p>
<p><img src="https://miro.medium.com/max/1400/1*dP21r-mIfABMQW2iFFKqwA.png" alt="" />
<sub>Date filters for the dashboard</sub></p>
<p>Finally you might want the company to get weekly updates of the last week’s orders every Monday morning. You can do this via email, Slack or other integrations directly from the Dashboard.</p>
<p><img src="https://miro.medium.com/max/1400/1*VlyauRJqwTDWQvA0HqR1Ew.png" alt="" />
<sub>Schedule dashboard reports</sub></p>
<p>This again is just scratching the surface of what’s possible with Lookers Explore and visualisation layer. I recommend taking this free training course for you can understand what is possible: <a href="https://www.cloudskillsboost.google/course_templates/323">https://www.cloudskillsboost.google/course_templates/323</a></p>
<h2 id="reviewingmysolution">Reviewing my solution</h2>
<p>We now have a complete data warehouse that contains all of the company’s data, adding new data sources is as simple as a few clicks and writing the required LookML.</p>
<h3 id="fivetran-1">FiveTran</h3>
<p>Collecting data from multiple data sources and pushing them to your data store.</p>
<p><strong>The good</strong>
I love FiveTran - something I worried was going to take up most of the time for this project took me an afternoon. It handles your connectors, schemas, data deltas, duplicates, schema changes, error handling, sync frequencies and everything you can imagine for collecting your data.</p>
<p><strong>The bad</strong> 
It is <em>expensive…</em> or is it? When you look at the cost per month it might make a few eyes water but is it cheaper than developing it yourself? Yes, vs a developers salary for writing and managing it it might be the cheaper option. Are there cheaper alternatives? probably, I didn’t do a deep dive into alternatives and their pricing as the goal was to build a proof of concept and see the value. If your goal is about time to market and ease FiveTran is worth it, otherwise it might be worth investigating other solutions.</p>
<p>If cost or vendor lock-in is a concern for you, do consider it in your appraisal. While it is not impossible it would be an unpleasant task to switch this out at a later date as your database schema and LookML will be somewhat coupled to FiveTran.</p>
<p><strong>The cost</strong>
You can find a breakdown on their <a href="https://www.fivetran.com/pricing">website</a> to give you a rough idea of real world pricing. This project consumed roughly $2000 GCP credits per month, this however was not at all optimised, lots of that data is not being used and could be removed bringing the price down.</p>
<p><strong>Alternatives</strong>
One of the reasons for selecting FiveTran was the ease and it being included in the GCP credits, so for that it selected itself. I’m not going to include a breakdown of all the other players in the market however when researching cheaper alternatives there is an open source offering. This is great for the connectors but it still would add some infrastructure and tech management: <a href="https://www.singer.io/">https://www.singer.io/</a></p>
<h3 id="bigquery-1">BigQuery</h3>
<p>Storage for the data warehouse.</p>
<p><strong>The good</strong>
BigQuery is well known and one of the industry leaders for this type of big data. It’s very easy to set up and get going, the documentation is good and the fact FiveTran can do most of the handwork for you makes it even better.</p>
<p><strong>The bad</strong>
I don’t really have many complaints other than GCP web UI is a bit clunky. I would like to better understand the cost breakdown as billing can be confusing when trying to understand the cost of certain queries.</p>
<p><strong>The cost</strong>
<a href="https://cloud.google.com/bigquery/pricing#storage">Storage is cheap</a>, the BigQuery database has many terabytes of data and for storage was never over $100 a month, what gets more expensive are the queries. Some of the analytics tables are massive and while I was learning Looker I accidentally spent $500 in a day running unoptimised queries.</p>
<p>You can lower these costs by learning about <a href="https://docs.looker.com/data-modeling/learning-lookml/derived-tables"><strong>P</strong>ersistent <strong>D</strong>erived <strong>T</strong>able<strong>s</strong></a>  and implementing <a href="https://docs.looker.com/data-modeling/learning-lookml/caching">Caching Policies</a>.</p>
<p><strong>Alternatives</strong>
There are lots of different databases you can use for a data warehouse, I won’t go into them all but if you’re going to use Looker it needs to be an SQL database.</p>
<h3 id="looker-1">Looker</h3>
<p>Data processing and visualisation.</p>
<p><strong>The good</strong>
Again I love Looker, once I got it going I found it incredibly addictive, having the power to pivot over all companies data in one place was incredible. Answering complex or never answered before questions was taking me seconds. I automated people’s daily tasks in a couple of hours, freeing them up to focus on bigger things. The explorer and dashboard are extremely intuitive once you learn your way around.</p>
<p><strong>The bad</strong>
While LookML is not that complex the documentation is horrible. It’s near impossible to find examples of anything that’s not the most basic implementation. Code snippets are ok but sometimes you want to know the structure of the data it’s working with to make it easier to visualise and this is never documented.</p>
<p>You might get lucky with some forums but to be honest they are not great and not exactly buzzing with engagement. Something that might also catch you out is on the forums someone might include an SQL statement in their LookML but they don’t say what database they are using. If you’re not using the same database this might give you a syntax error as the function is not available - this happened to me a lot with BigQuery.</p>
<p>Luckily in our credits we had access to professional services from Google so when I got blocked I could ask them directly although I did sometimes get blocked for a week as I was waiting for our next session. One complex measure I wanted to create needed sum values from an array of <code>json</code> objects inside a table field and without their help I honestly don’t know how I would have solved it with just the existing Looker documentation.</p>
<p>There is also no real way to learn Looker without having access to Looker. I feel extremely lucky to have undertaken this project because based on the cost and there being no free tier I’m not sure if I would have ever got the chance to use it otherwise. This also means there is some technical debt as I was teaching myself as I was building the proof of concept.</p>
<p>I would love it if Looker offered the ability to have a personal Looker account for learning but also to build some simple projects of our own on top of it. I think this would really increase the size of the community and improve the documentation.</p>
<p><strong>The cost</strong>
Again Looker is <em>expensive…</em> or is it? Looker roughly costs $5000 a month and you need to pay for users on top of that. This seems like a high price but is it when you can start getting value out of your data and starting this democratisation process? Personally again, I think it’s worth it.</p>
<p>The professional services were an additional $10,000 which was really worth the money and thankfully was also included in the credits.</p>
<p><strong>Alternatives</strong>
There are many different Business intelligence tools, <a href="https://www.tableau.com">Tableau</a> for example. I didn’t look too far down this direction as my architecture was about using the tools I didn’t need to manage and were included in the GCP credits.</p>
<p>You could however implement <a href="https://datastudio.google.com/">Google Data Studio</a> for free if you didn’t want to go down the Looker route, however this would require your users to understand SQL so it doesn’t solve the democratisation problem.</p>
<h2 id="conclusion">Conclusion</h2>
<p>As I mentioned I had zero experience with big data when I started the project and I only have slightly more than that now. I worked on this in my lunch hour and went from nothing to my first Looker dashboard in less than two weeks. From nothing to the business using it in less than two months and what took most of that time was I only had access to the professional services for a hour, once a week for five weeks.</p>
<p>What I did was pretty straight forward and I don’t pretend to know or really understand this discipline, I would say I don’t even know enough to know what I don’t know. However my goal was to build a data warehouse and I achieved that, so let’s look back at the success criteria for the project:</p>
<blockquote>
  <p><em>Anyone in the company could access all of our data and get insights without help from the technology team.</em></p>
</blockquote>
<p>Looker was handed over to the business and with some simple training and with access to the <a href="https://www.cloudskillsboost.google/course_templates/323">Google training course</a> the team were able to start building their own reports and automating their workflows. The data democratisation process has started with <strong>EPBM</strong> being able to answer more complex questions and get powerful insights.</p>
<blockquote>
  <p><em>Decommission complex and expensive infrastructure.</em></p>
</blockquote>
<p>Services that were generating weekly updates and reports can now be decommissioned and replaced by Looker.</p>
<blockquote>
  <p><em>The technology team would no longer be context switching from their roadmap to answer data and insight related questions.</em></p>
</blockquote>
<p>Some of the data has yet to be modelled in LookML. Once this is completed there is no real need for the technology team to be involved or alternatively someone with Looker experience could be brought in to own this.</p>
<blockquote>
  <p><em>The technology team doesn’t inherit a new system to manage and monitor.</em></p>
</blockquote>
<p>All of the tools and services are SaaS products so the technology team is not needed, however there will be people needed to manage these services from an IT perspective (users, permissions etc). I also recommend someone keeping an eye on billing for complex queries and performance optimisations also FiveTran syncing in case there are issues.</p>
<p>From this success criteria the project ticked all the boxes but what about the cost of investment? Overall the project is going to take up all of the $100,000 in GCP credits over the course of a year, with a rough breakdown of:</p>
<ul>
<li>FiveTran: $24,000</li>
<li>BigQuery: $4000 (including a buffer for poorly optimised queries)</li>
<li>Looker: $62,000</li>
<li>Professional services: $10,000</li>
</ul>
<p>This might look expensive at first and as the company grows so will the cost but I know of data and insight teams spending more than this per week. Also consider the fact this was done by one person, part-time in less than two months. With someone full-time who knew what they were doing I think this could realistically have been completed in a week.</p>
<p>So far the investment for the company is essentially zero and going forward the infrastructure is the equivalent of one developer’s salary. To get the most out of it I would also look to hire someone even if it’s part time to rewrite my models, model new data and evolve the platform.</p>
<p>Even with this added cost for me I think it is more than worth it. This architecture allows for data to be democratised while being grown, run and managed by a small team of experts in Looker and data scientists who work directly with <strong>EPBM.</strong> I feel this will encourage innovation, help make data driven decisions and most importantly put an end to the concept of <em>the</em> <em>datakeepers</em>.</p>
  </div>
</body>

